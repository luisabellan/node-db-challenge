"use strict";var express=require("express"),Projects=require("./project-model"),router=express.Router();router.get("/",function(t,e){Projects.find().then(function(t){e.json(t)}).catch(function(t){e.status(500).json({message:"Failed to get projects"})})}),router.get("/:id",function(t,e){var o=t.params.id;Projects.findById(o).then(function(t){t?e.json(t):e.status(404).json({message:"Could not find project with given id."})}).catch(function(t){e.status(500).json({message:"Failed to get projects"})})}),router.post("/",function(t,e){var o=t.body;Projects.add(o).then(function(t){e.status(201).json(t)}).catch(function(t){e.status(500).json({message:"Failed to create new project"})})}),router.post("/:id/project",function(t,e){var o=t.body,s=t.params.id;Projects.findById(s).then(function(t){t?Projects.addStep(o,s).then(function(t){e.status(201).json(t)}):e.status(404).json({message:"Could not find project with given id."})}).catch(function(t){e.status(500).json({message:"Failed to create new step"})})}),router.get("/:id/moreinfo",function(t,e){var o=t.params.id;Projects.findMoreInfoById(o).then(function(t){t?e.json(project):e.status(404).json({message:"Could not find project for given project"})}).catch(function(t){e.status(500).json({message:"Failed to get project"})})}),router.put("/:id",function(t,e){var o=t.params.id,s=t.body;Projects.findById(o).then(function(t){t?Projects.update(s,o).then(function(t){e.json(t)}):e.status(404).json({message:"Could not find project with given id"})}).catch(function(t){e.status(500).json({message:"Failed to update project"})})}),router.delete("/:id",function(t,e){var o=t.params.id;Projects.remove(o).then(function(t){t?e.json({removed:t}):e.status(404).json({message:"Could not find project with given id"})}).catch(function(t){e.status(500).json({message:"Failed to delete project"})})}),module.exports=router;