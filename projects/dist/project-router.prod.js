"use strict";var express=require("express"),Projects=require("./project-model"),router=express.Router();router.get("/",function(t,e){Projects.find().then(function(t){e.json(t)}).catch(function(t){e.status(500).json({message:"Failed to get projects"})})}),router.get("/:id",function(t,e){var s=t.params.id;Projects.findById(s).then(function(t){t?e.json(t):e.status(404).json({message:"Could not find project with given id."})}).catch(function(t){e.status(500).json({message:"Failed to get projects"})})}),router.get("/:id/steps",function(t,e){var s=t.params.id;Projects.findSteps(s).then(function(t){t.length?e.json(t):e.status(404).json({message:"Could not find steps for given project"})}).catch(function(t){e.status(500).json({message:"Failed to get steps"})})}),router.post("/",function(t,e){var s=t.body;Projects.add(s).then(function(t){e.status(201).json(t)}).catch(function(t){e.status(500).json({message:"Failed to create new project"})})}),router.post("/:id/steps",function(t,e){var s=t.body,o=t.params.id;Projects.findById(o).then(function(t){t?Projects.addStep(s,o).then(function(t){e.status(201).json(t)}):e.status(404).json({message:"Could not find project with given id."})}).catch(function(t){e.status(500).json({message:"Failed to create new step"})})}),router.put("/:id",function(t,e){var s=t.params.id,o=t.body;Projects.findById(s).then(function(t){t?Projects.update(o,s).then(function(t){e.json(t)}):e.status(404).json({message:"Could not find project with given id"})}).catch(function(t){e.status(500).json({message:"Failed to update project"})})}),router.delete("/:id",function(t,e){var s=t.params.id;Projects.remove(s).then(function(t){t?e.json({removed:t}):e.status(404).json({message:"Could not find project with given id"})}).catch(function(t){e.status(500).json({message:"Failed to delete project"})})}),module.exports=router;